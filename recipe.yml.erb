resources:
  - type: command
    script: brew update
  <%- homebrew_tap_names.each do |homebrew_tap_name| -%>
  - type: homebrew_tap
    name: <%= homebrew_tap_name %>
  <%- end -%>
  <%- homebrew_package_names.each do |homebrew_package_name| -%>
  - type: homebrew_package
    name: <%= homebrew_package_name %>
  <%- end -%>
  <%- go_package_names.each do |go_package_name| -%>
  - type: command
    script: go get <%= go_package_name %>
  <%- end -%>
  - type: homebrew_package
    name: graphviz
    options: --with-app --with-librsvg
  <%- rbenv_ruby_versions.each do |ruby_version| -%>
  - type: rbenv_ruby
    version: <%= ruby_version %>
  <%- end -%>
  - type: rbenv_ruby
    version: 2.3.1
    global: true
  - type: git
    repository: https://github.com/hanachin/dotfiles.git
    path: /Users/<%= ENV["USER"] %>/src/github.com/hanachin/dotfiles
    status: updated
  - type: git
    repository: git@github.com:sgymtic/sl.git
    path: /Users/<%= ENV["USER"] %>/src/github.com/sgymtic/sl
    status: updated
  - type: command
    script: cd /Users/<%= ENV["USER"] %>/src/github.com/sgymtic/sl; make && mkdir -p /Users/<%= ENV["USER"] %>/bin && cp erutaso /Users/<%= ENV["USER"] %>/bin
    check_script: ls /Users/<%= ENV["USER"] %>/src/github.com/sgymtic/sl | grep erutaso
  - type: command
    script: mkdir -p /Users/<%= ENV["USER"] %>/.bin
  - type: command
    script: mkdir -p /Users/<%= ENV["USER"] %>/.emacs.d
  - type: template
    destination: <%= ENV["RBENV_ROOT"] %>/default-gems
    source: files/default-gems
  <%- dropbox_dotfiles.each do |path| -%>
  - type: symlink
    destination: /Users/<%= ENV["USER"] %>/Dropbox/dotfiles/<%= path %>
    source: /Users/<%= ENV["USER"] %>/<%= path %>
  <%- end -%>
  - type: command
    check_script: "finger -l | grep -E 'Shell: /bin/zsh$'"
    script: sudo chsh -s /bin/zsh <%= ENV["USER"] %>
  - type: command
    check_script: heroku plugins | grep docker
    script: heroku plugins:install heroku-docker
